<!DOCTYPE html>
<html>
<head>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script src="https://use.fontawesome.com/releases/v6.2.0/js/all.js"></script>

    <link rel="stylesheet" type="text/css" href="./style.css" />
    <script type="module" src="./index.js"></script>

    <style>
     :root {
  --building-color: #FF9800;
  --house-color: #0288D1;
  --shop-color: #7B1FA2;
  --warehouse-color: #558B2F;
}

/*
 * Optional: Makes the sample page fill the window.
 */
html,
body {
  height: 100%;
  margin: 0;
  padding: 0;
}

/*
 * Always set the map height explicitly to define the size of the div element
 * that contains the map.
 */
#map {
  height: 100%;
  width: 100%;
}



/*
 * Property styles in unhighlighted state.
 */
.property {
  align-items: center;
  background-color: #FFFFFF;
  border-radius: 50%;
  color: #263238;
  display: flex;
  font-size: 14px;
  gap: 15px;
  height: 70px;
  justify-content: center;
  padding: 4px;
  position: relative;
  position: relative;
  transition: all 0.2s ease-out;
  width:  70px;
}

.property::after {
  border-left: 9px solid transparent;
  border-right: 9px solid transparent;
  border-top: 9px solid #FFFFFF;
  content: "";
  height: 0;
  left: 50%;
  position: absolute;
  top: 95%;
  transform: translate(-50%, 0);
  transition: all 0.2s ease-out;
  width: 0;
  z-index: 1;
}

.property .icon {
  align-items: center;
  display: flex;
  justify-content: center;
  color: #FFFFFF;
}

.property .icon svg {
  height: 20px;
  width: auto;
}

.property .details {
  display: none;
  flex-direction: column;
  flex: 1;
}

.property .address {
  color: #9E9E9E;
  font-size: 10px;
  margin-bottom: 10px;
  margin-top: 5px;
}

.property .features {
  align-items: flex-end;
  display: flex;
  flex-direction: row;
  gap: 10px;
}

.property .features > div {
  align-items: center;
  background: #F5F5F5;
  border-radius: 5px;
  border: 1px solid #ccc;
  display: flex;
  font-size: 10px;
  gap: 5px;
  padding: 5px;
}

/*
 * Property styles in highlighted state.
 */
.property.highlight {
  background-color: #FFFFFF;
  border-radius: 8px;
  box-shadow: 10px 10px 5px rgba(0, 0, 0, 0.2);
  height: 100px;
  width: auto;
  padding-right: 15px;
}

.property.highlight::after {
  border-top: 9px solid #FFFFFF;
}

.property.highlight .details {
  display: flex;
}

.property.highlight .icon svg {
  width: 50px;
  height: 50px;
}

.property .bed {
  color: #FFA000;
}

.property .bath {
  color: #03A9F4;
}

.property .size {
  color: #388E3C;
}

/*
 * House icon colors.
 */
.property.highlight:has(.fa-house) .icon {
  color: var(--house-color);
}

.property:not(.highlight):has(.fa-house) {
  background-color: var(--house-color);
}

.property:not(.highlight):has(.fa-house)::after {
  border-top: 9px solid var(--house-color);
}

/*
 * Building icon colors.
 */
.property.highlight:has(.fa-building) .icon {
  color: var(--building-color);
}

.property:not(.highlight):has(.fa-building) {
  background-color: var(--building-color);
}

.property:not(.highlight):has(.fa-building)::after {
  border-top: 9px solid var(--building-color);
}

/*
 * Warehouse icon colors.
 */
.property.highlight:has(.fa-warehouse) .icon {
  color: var(--warehouse-color);
}

.property:not(.highlight):has(.fa-warehouse) {
  background-color: var(--warehouse-color);
}

.property:not(.highlight):has(.fa-warehouse)::after {
  border-top: 9px solid var(--warehouse-color);
}

/*
 * Shop icon colors.
 */
.property.highlight:has(.fa-shop) .icon {
  color: var(--shop-color);
}

.property:not(.highlight):has(.fa-shop) {
  background-color: var(--shop-color);
}

.property:not(.highlight):has(.fa-shop)::after {
  border-top: 9px solid var(--shop-color);
}

.logo{
    max-width: 100%;
    max-height: 100px;
    border-radius: 50%;
    transition: all 0.2s ease-out;
}

.highlight > div> .logo{
    border-radius: 5px;
}
    </style>

</head>
<body>
    <div id="map"></div>
    <script>
       async function initMap() {
  // Request needed libraries.
  const { Map } = await google.maps.importLibrary("maps");
  const { AdvancedMarkerElement } = await google.maps.importLibrary("marker");
  const center = { lat: 51.03406855212306, lng: 4.114069511980837 };
  const map = new Map(document.getElementById("map"), {
    zoom: 9,
    center,
    mapId: "c4e4580c04395a6d",
    styles: [ // Apply minimalistic styles
      {
        "featureType": "poi",
        "stylers": [
          { "visibility": "off" }
        ]
      },
      {
        "featureType": "transit",
        "stylers": [
          { "visibility": "off" }
        ]
      },
      {
            "featureType": "all",
            "elementType": "labels.text",
            "stylers": [
            { "visibility": "off" }
            ]
        },
        {
            "featureType": "road",
            "elementType": "labels.icon",
            "stylers": [
            { "visibility": "off" }
            ]
        },
        {
            "featureType": "poi",
            "elementType": "labels",
            "stylers": [
            { "visibility": "off" }
            ]
        },
        {
            "featureType": "transit",
            "elementType": "labels",
            "stylers": [
            { "visibility": "off" }
            ]
        },
    ]
  });

  for (const property of properties) {
    const AdvancedMarkerElement = new google.maps.marker.AdvancedMarkerElement({
      map,
      content: buildContent(property),
      position: property.position,
      title: property.description,
    });

    AdvancedMarkerElement.addListener("click", () => {
      toggleHighlight(AdvancedMarkerElement, property);
    });
  }

  
  
}

let currentHighlightedMarker = null;

function toggleHighlight(markerView, property) {
  if (currentHighlightedMarker === markerView) {
    // If the clicked marker is already highlighted, dehighlight it
    markerView.content.classList.remove("highlight");
    markerView.zIndex = null;
    currentHighlightedMarker = null;
  } else {
    // Otherwise, highlight the clicked marker and dehighlight the previous one
    if (currentHighlightedMarker) {
      currentHighlightedMarker.content.classList.remove("highlight");
      currentHighlightedMarker.zIndex = null;
    }

    markerView.content.classList.add("highlight");
    markerView.zIndex = 1;
    currentHighlightedMarker = markerView;
  }
}


function buildContent(property) {
  const content = document.createElement("div");

  content.classList.add("property");
  content.innerHTML = `
    <div class="icon">
        <img src="${property.logo}" class="logo" style="max-width:100%;" title="Theater"/>
        <span class="fa-sr-only">Theater</span>
    </div>
    <div class="details">
        <div class="name">${property.name}</div>
        <div class="address">${property.address}</div>
        <div class="website"><a href="${property.website}" target="_blank">${property.website}</a></div>
    </div>
`;

  return content;
}

const properties = [
{
    "name": "Muzinar VZW",
    "logo": "https://static.wixstatic.com/media/69ea52_fbfeb4331f7140f7bdebb1e19f7c3438~mv2.png/v1/fill/w_333,h_169,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/OLIVER%20Logo%20Small%20blauw.png",
    "address": "Vichte",
    "website": "https://www.muzinarvzw.be/",
    "position": {
      "lat": 50.83951013801532,
      "lng": 3.405684317792178
    }
  },
  {
    "name": "DEEPBRIDGE",
    "logo": "https://deepbridge.be/wp-content/uploads/2017/04/DeepBridge-Logo-Base-Yellow-RGB_800x800.png",
    "address": "Wilrijk",
    "website": "https://deepbridge.be/",
    "position": {
      "lat": 51.15595503751821,
      "lng": 4.372483011408279
    }
  },
  {
    "name": "Streven Vichte",
    "logo": "https://scontent-bru2-1.xx.fbcdn.net/v/t39.30808-6/349340723_1011202326997078_782902861576038453_n.jpg?stp=dst-jpg_p526x296&_nc_cat=101&ccb=1-7&_nc_sid=5f2048&_nc_ohc=Tg2B7-1P7J0Ab4LrION&_nc_ht=scontent-bru2-1.xx&oh=00_AfDln6V5kImzbyRQyrcITOhpJFRyg0AZsh3PSj-tYhKctA&oe=661ACA02",
    "address": "Vichte",
    "website": "https://www.strevenvichte.be/",
    "position": {
      "lat": 50.83922101276414,
      "lng": 3.405841747989295
    }
  },
  {
    "name": "Compagnie Foert",
    "logo": "https://www.ciefoert.be/_app/assets/logo-06fe68f2.svg",
    "address": "Waregem",
    "website": "https://www.ciefoert.be/",
    "position": {
      "lat": 50.88780672243461,
      "lng": 3.4291093901878638
    }
  },
];

// Asynchronously load Google Maps JavaScript API
function loadMapScript() {
    const script = document.createElement('script');
    script.src = 'https://maps.googleapis.com/maps/api/js?key=AIzaSyAaE3p7rHezMvtm7ojfpQSiZVbfhmRS-ps&callback=initMap';
    script.async = true;
    document.body.appendChild(script);
}

window.onload = loadMapScript;
    </script>
    <!-- prettier-ignore -->
    <script>(g=>{var h,a,k,p="The Google Maps JavaScript API",c="google",l="importLibrary",q="__ib__",m=document,b=window;b=b[c]||(b[c]={});var d=b.maps||(b.maps={}),r=new Set,e=new URLSearchParams,u=()=>h||(h=new Promise(async(f,n)=>{await (a=m.createElement("script"));e.set("libraries",[...r]+"");for(k in g)e.set(k.replace(/[A-Z]/g,t=>"_"+t[0].toLowerCase()),g[k]);e.set("callback",c+".maps."+q);a.src=`https://maps.${c}apis.com/maps/api/js?`+e;d[q]=f;a.onerror=()=>h=n(Error(p+" could not load."));a.nonce=m.querySelector("script[nonce]")?.nonce||"";m.head.append(a)}));d[l]?console.warn(p+" only loads once. Ignoring:",g):d[l]=(f,...n)=>r.add(f)&&u().then(()=>d[l](f,...n))})
        ({key: "AIzaSyAaE3p7rHezMvtm7ojfpQSiZVbfhmRS-ps", v: "weekly"});</script>

</body>
</html>
